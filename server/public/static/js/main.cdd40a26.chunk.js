(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{211:function(e,t,a){e.exports=a(441)},216:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},245:function(e,t,a){},441:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),o=a.n(l),s=a(7),c=a(11),i=a(13),u=a(12),m=a(108),h=(a(143),a(144),a(216),a(99)),d=a.n(h),E=function e(){var t=this;Object(s.a)(this,e),this.login=function(e){return t.service.post("/login",e)},this.signup=function(e){return t.service.post("/signup",e)},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=d.a.create({baseURL:"".concat("https://motoevents.herokuapp.com/api"),withCredentials:!0})},p=a(8),v=(a(234),function e(){var t=this;Object(s.a)(this,e),this.getEventDetails=function(e){return t.service.get("/eventDetails/".concat(e))},this.createEvent=function(e){return t.service.post("/newEvent",e)},this.searchEvents=function(e){return t.service.post("/search",e)},this.getAllEvents=function(){return t.service.get("/eventList")},this.deleteEvent=function(e){return t.service.post("eventDetails/delete/".concat(e))},this.service=d.a.create({baseURL:"".concat("https://motoevents.herokuapp.com/api"),withCredentials:!0})}),g=(a(235),a(14)),b=a(51),f=a(24),C=function(e){return r.a.createElement(f.a,{className:"card-col",sm:12,md:6,lg:4},r.a.createElement(b.a,{border:"light",className:"event-card"},r.a.createElement(b.a.Img,{variant:"top",src:e.image_url}),r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,e.name),r.a.createElement(b.a.Text,null,e.date.slice(0,10))),r.a.createElement(b.a.Body,{className:"card-buttons"},e.loggedInUser&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.b,{to:"/profile/add/myEvents",className:"join-btn btn btn-light"},"Unirme"),r.a.createElement(g.b,{to:"/eventDetails/".concat(e._id),className:"join-btn btn btn-light"},"Detalles"))),r.a.createElement(b.a.Footer,null,"Iniciado por ",e.ownerId.username)))},S=a(38),O=a(6),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r)),n.EventService.searchEvents(n.state).then((function(e){return n.setState({filteredEvents:e.data},n.props.filterEventList(e.data))})).catch((function(e){return console.log(e)}))},n.onSubmit=function(e){return e.preventDefault()},n.state={name:"",filteredEvents:[]},n.EventService=new v,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onSubmit:this.onSubmit,className:"search-bar"},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Control,{onKeyUp:this.handleInputChange,value:this.props.name,name:"name",type:"text",placeholder:"Buscar evento"}))))}}]),a}(n.Component),I=a(139),y=a(64),U=a(110),k=a.n(U),L=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({city:e})},n.handleSelect=function(e){Object(U.geocodeByAddress)(e).then((function(e){return Object(U.getLatLng)(e[0])})).then((function(t){return n.setState(Object(y.a)(Object(y.a)({},n.state),{},{coordinates:t,city:e}))})).then((function(){return n.props.getTheCity(n.state)})).catch((function(e){return console.log(e)}))},n.state={city:"",coordinates:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{value:this.state.city,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,l=e.loading;return r.a.createElement("div",null,r.a.createElement("input",t({placeholder:"Busca una direcci\xf3n"})),r.a.createElement("div",null,l&&r.a.createElement("span",null,"Loading..."),a.map((function(e){var t=e.active?"suggestion-item--active":"suggestion-item";return r.a.createElement("div",n(e,t),r.a.createElement("span",null,e.description))}))))})))}}]),a}(r.a.Component),T=a(47),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getTheCity=function(e){return n.setState(Object(y.a)(Object(y.a)({},n.state),{},{location:{city:e.city,coordinates:[e.coordinates.lat,e.coordinates.lng]}}))},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.EventService.createEvent(n.state).then((function(){n.props.handleEventSubmit(),n.props.handleToast("Evento creado!")})).catch((function(e){return console.log(e)}))},n.state={name:"",description:"",location:{city:"",coordinates:[]},image_url:"",date:"",ownerId:n.props.loggedInUser._id},n.EventService=new v,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Crea un nuevo evento"),r.a.createElement("hr",null),r.a.createElement(O.a,{onSubmit:this.handleFormSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.name,name:"name",type:"text"}),r.a.createElement(O.a.Text,{className:"text-muted"},"Sin faltas de ortograf\xeda.")),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Descripci\xf3n"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.description,name:"description",type:"text"})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Ubicaci\xf3n"),r.a.createElement(L,{getTheCity:function(t){return e.getTheCity(t)}})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Fecha"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.date,name:"date",type:"date"})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Imagen (URL)"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.image_url,name:"image_url",type:"text"})),r.a.createElement(T.a,{variant:"dark",type:"submit"},"Crear")))}}]),a}(n.Component),D=function(e){return r.a.createElement(I.a,{show:e.show,onHide:e.onHide},r.a.createElement(I.a.Body,null,r.a.createElement(w,e)))},N=a(30),_=a(40),M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){return n.updateEventList()},n.updateEventList=function(){n.EventService.getAllEvents().then((function(e){return n.setState({events:e.data})})).catch((function(e){return console.log(e)}))},n.handleModal=function(e){return n.setState({showModal:e})},n.handleEventSubmit=function(){n.handleModal(!1),n.updateEventList()},n.handleSearchSubmit=function(e){n.setState({events:e})},n.state={events:[],showModal:!1},n.EventService=new v,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{as:"main",className:"events-page"},r.a.createElement(j,{events:this.state.events,filterEventList:this.handleSearchSubmit}),r.a.createElement("h1",null,"Eventos activos"),this.props.loggedInUser&&r.a.createElement(T.a,{onClick:function(){return e.handleModal(!0)},className:"create-btn"},"Crear nuevo evento"),0===this.state.events.length?r.a.createElement("h3",null,"No hay eventos activos en este momento, crea uno!"):r.a.createElement(_.a,null,this.state.events.map((function(t){return r.a.createElement(C,Object.assign({loggedInUser:e.props.loggedInUser,key:t._id},t))})))),r.a.createElement(D,Object.assign({size:"lg",show:this.state.showModal,onHide:function(){return e.handleModal(!1)},handleEventSubmit:this.handleEventSubmit},this.props)))}}]),a}(n.Component),x=(a(245),a(76)),F=Object(x.withScriptjs)(Object(x.withGoogleMap)((function(e){return r.a.createElement(x.GoogleMap,{defaultZoom:8,defaultCenter:{lat:e.location.coordinates[0],lng:e.location.coordinates[1]}},r.a.createElement(x.Marker,{position:{lat:e.location.coordinates[0],lng:e.location.coordinates[1]}}))}))),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.id;n.EventService.getEventDetails(e).then((function(e){return n.setState({eventDetails:e.data})})).catch((function(e){return console.log(e)}))},n.deletingEvent=function(){var e=n.props.match.params.id;n.EventService.deleteEvent(e).catch((function(e){return console.log(e)}))},n.state={eventDetails:void 0},n.EventService=new v,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.state.eventDetails?r.a.createElement(N.a,{as:"main"},this.state.eventDetails.location.city,r.a.createElement("p",null,"N\xba de usuarios que asistir\xe1n"),r.a.createElement(_.a,null,r.a.createElement(f.a,{className:"col-details",md:{span:6,offset:1}},r.a.createElement("h3",null," ",this.state.eventDetails.name),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"Detalles:")," ",this.state.eventDetails.description),r.a.createElement("p",null,r.a.createElement("b",null,"Fecha:")," ",this.state.eventDetails.date),r.a.createElement("hr",null),r.a.createElement("p",null,"Creado por ",this.state.eventDetails.ownerId.username),r.a.createElement("hr",null),r.a.createElement("div",{className:"details-btn"},r.a.createElement(g.b,{className:"join-btn btn btn-light",onClick:function(){return e.deletingEvent()},to:"/profile/add/myEvents"},"Unirse"),r.a.createElement(g.b,{className:"join-btn btn btn-light",to:"/profile/add/myEvents"},"Comentar"),this.props.loggedInUser._id===this.state.eventDetails.ownerId._id&&r.a.createElement(g.b,{className:"join-btn btn btn-light",onClick:function(){return e.deletingEvent()},to:"/eventList"},"Borrar"))),r.a.createElement(f.a,{className:"col-details",md:{span:5,offset:1}},r.a.createElement("img",{src:this.state.eventDetails.image_url,alt:this.state.eventDetails.name}))),r.a.createElement(F,{location:this.state.eventDetails.location,googleMapURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://motoevents.herokuapp.com/api",REACT_APP_URL:"https://motoevents.herokuapp.com/"}).MAPS_API_URL),loadingElement:r.a.createElement("div",{style:{height:"30vh"}}),containerElement:r.a.createElement("div",{style:{height:"30vh"}}),mapElement:r.a.createElement("div",{style:{height:"30vh"}})}),r.a.createElement(g.b,{className:"btn btn-dark btn-md",to:"/eventList"},"Volver")):r.a.createElement("h3",null,"Cargando...")}}]),a}(n.Component),P=a(77),B=a(50),R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).logout=function(){n.AuthService.logout().then((function(){n.props.setTheUser(!1),n.props.handleToast("Hasta la pr\xf3xima!")})).catch((function(e){return console.log(e)}))},n.AuthService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(P.a,{bg:"dark",variant:"dark",expand:"lg",sticky:"top"},r.a.createElement(P.a.Brand,null,r.a.createElement(g.b,{to:"/"},"Moto Events")),r.a.createElement(P.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(P.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(B.a,{className:"ml-auto"},r.a.createElement(B.a.Link,{as:"span"},r.a.createElement(g.c,{to:"/",exact:!0,activeStyle:{color:"white"}},"Inicio")),r.a.createElement(B.a.Link,{as:"span"},r.a.createElement(g.c,{to:"/eventList",exact:!0,activeStyle:{color:"white"}},"Eventos")),this.props.loggedInUser?r.a.createElement(B.a.Link,{as:"span"},r.a.createElement("span",{onClick:this.logout},"Cerrar sesi\xf3n")):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Link,{as:"span"},r.a.createElement(g.c,{to:"/signup",activeStyle:{color:"white"}},"Registro")),r.a.createElement(B.a.Link,{as:"span"},r.a.createElement(g.c,{to:"/login",activeStyle:{color:"white"}},"Inicio sesi\xf3n"))),r.a.createElement(B.a.Link,{as:"span"},r.a.createElement(g.c,{to:"/profile",activeStyle:{color:"white"}},this.props.loggedInUser&&"Perfil de ".concat(this.props.loggedInUser.username))))))}}]),a}(n.Component),G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{as:"main"},r.a.createElement("h1",null,"Bienvenido a Moto Events"),r.a.createElement("p",null,"\xdanete y crea eventos para disfrutar de las dos ruedas!")))},H=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.AuthService.signup(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast("".concat(n.state.username," registrado!")),n.props.history.push("/eventList")})).catch((function(e){return console.log(e.response.data.message)}))},n.state={username:"",password:"",motorbike:""},n.AuthService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(N.a,{as:"main"},r.a.createElement(_.a,null,r.a.createElement(f.a,{md:{offset:3,span:6}},r.a.createElement("h3",null,"Registro de usuario"),r.a.createElement("hr",null),r.a.createElement(O.a,{onSubmit:this.handleFormSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre de usuario"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.username,name:"username",type:"text"})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Contrase\xf1a"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"}),r.a.createElement(O.a.Text,{className:"text-muted"},"M\xednimo cuatro caracteres.")),r.a.createElement(O.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(O.a.Label,null,"\xbfQu\xe9 moto tienes?"),r.a.createElement(O.a.Control,{as:"select",onChange:this.handleInputChange,value:this.state.motorbike,name:"motorbike"},r.a.createElement("option",null,"1"))),r.a.createElement(T.a,{variant:"dark",type:"submit"},"Registrarme")))))}}]),a}(n.Component),K=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleFormSubmit=function(e){e.preventDefault(),n.AuthService.login(n.state).then((function(e){n.props.setTheUser(e.data),n.props.handleToast("Bienvenido ".concat(n.state.username,"!")),n.props.history.push("/eventList")})).catch((function(e){return console.log(e.response.data.message)}))},n.state={username:"",password:""},n.AuthService=new E,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(N.a,{as:"main"},r.a.createElement(_.a,null,r.a.createElement(f.a,{md:{offset:3,span:6}},r.a.createElement("h3",null,"Inicio de sesi\xf3n"),r.a.createElement("hr",null),r.a.createElement(O.a,{onSubmit:this.handleFormSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre de usuario"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.username,name:"username",type:"text"})),r.a.createElement(O.a.Control.Feedback,{type:"invalid"},"Please choose a username."),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Contrase\xf1a"),r.a.createElement(O.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password"})),r.a.createElement(T.a,{variant:"dark",type:"submit"},"Iniciar sesi\xf3n")))))}}]),a}(n.Component),W=a(141),q=function(e){return console.log(e),r.a.createElement(N.a,{as:"main"},r.a.createElement("h1",null,"\xa1Hola, ",e.loggedInUser.username,"!"),r.a.createElement(_.a,null,r.a.createElement(f.a,null,r.a.createElement("p",null,"Eventos a los que voy"),r.a.createElement(W.a,null,e.loggedInUser.events.map((function(e){return r.a.createElement(W.a.Item,{key:e},e.name)})))),r.a.createElement(f.a,null,r.a.createElement("p",null,"Mi moto"),r.a.createElement("p",null,"Modal con gr\xe1fico de nivo.rocks"),e.loggedInUser.motorbike),r.a.createElement(f.a,null,r.a.createElement("p",null,"Editar mi perfil"))))},J=a(140),V=function(e){var t=e.text;return r.a.createElement(m.a,{position:"bottom-left",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0},r.a.createElement(J.a.Header,null," ",r.a.createElement("strong",{className:"mr-auto"},"MotoEvents")," "),r.a.createElement(J.a.Body,null,t))},z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t})},e.fetchUser=function(){e.AuthService.isLoggedIn().then((function(t){return null===e.state.loggedInUser&&e.setState({loggedInUser:t.data})})).catch((function(e){return console.log({err:e})}))},e.handleToast=function(e){return m.b.dark(e)},e.state={loggedInUser:null,toast:{text:""}},e.AuthService=new E,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser,handleToast:this.handleToast}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(){return r.a.createElement(G,null)}}),r.a.createElement(p.b,{path:"/eventList",render:function(){return r.a.createElement(M,{loggedInUser:e.state.loggedInUser,handleToast:e.handleToast})}}),r.a.createElement(p.b,{path:"/eventDetails/:id",render:function(t){return e.state.loggedInUser?r.a.createElement(A,Object.assign({},t,{loggedInUser:e.state.loggedInUser})):r.a.createElement(p.a,{to:"/login"})}}),r.a.createElement(p.b,{path:"/signup",render:function(t){return r.a.createElement(H,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}}),r.a.createElement(p.b,{path:"/login",render:function(t){return r.a.createElement(K,Object.assign({},t,{setTheUser:e.setTheUser,handleToast:e.handleToast}))}}),r.a.createElement(p.b,{path:"/profile",render:function(t){return e.state.loggedInUser?r.a.createElement(q,Object.assign({},t,{loggedInUser:e.state.loggedInUser})):r.a.createElement(p.a,{to:"/login"})}})),r.a.createElement(V,Object.assign({},this.state.toast,{handleToast:this.handleToast})))}}]),a}(n.Component);o.a.render(r.a.createElement(g.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null))),document.getElementById("root"))}},[[211,1,2]]]);
//# sourceMappingURL=main.cdd40a26.chunk.js.map